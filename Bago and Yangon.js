var table = ee.FeatureCollection("users/pawlokdass/Sumalika/Bago_and_Yangon"),
var tcc = ee.Image("users/pawlokdass/Sumalika/tcc_myanmar_calib_2018_wgs84_bd"),
var geometry = /* color: #d63000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.2823108864927, 18.10270303365038],
              [96.28327648173806, 18.10272342918958],
              [96.28325502406594, 18.103131339475265],
              [96.28234307300087, 18.103116042856676]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry2 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.2813560200834, 18.16579546427258],
              [96.28198365699288, 18.16579546427258],
              [96.28197829257485, 18.166177742344097],
              [96.2813935710096, 18.166182839379392]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry3 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.21087829600808, 18.141057746109247],
              [96.2111357880735, 18.14116479920757],
              [96.21102849971291, 18.14134322089246],
              [96.21076296102044, 18.14123871678483]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry4 = /* color: #ffc82d */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.29522304069039, 17.735926613510312],
              [96.29585067759987, 17.735706906993418],
              [96.29589359294411, 17.736447776728525],
              [96.29531155358788, 17.73651930881661]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry5 = /* color: #00ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.49468551408287, 17.72874513656166],
              [96.49726043473717, 17.72970574922774],
              [96.49678836595055, 17.733343767538877],
              [96.49341951142785, 17.731299946118522]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry6 = /* color: #bf04c2 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.4996422363424, 17.722409051712717],
              [96.50378356706139, 17.722674762995506],
              [96.50524268876549, 17.72386023930544],
              [96.50464187394616, 17.73007364207668],
              [96.50178800355431, 17.729848818758732],
              [96.50125156175133, 17.729031277043184],
              [96.49895559083458, 17.728540750223722]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry7 = /* color: #ff0000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.48822139035698, 17.74230309454502],
              [96.48846815358635, 17.742415498424428],
              [96.48841719161507, 17.742655633748605],
              [96.48813287745949, 17.742543230019923]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry8 = /* color: #00ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.49382720719811, 17.753045010044517],
              [96.49310837518212, 17.7479870659218],
              [96.49615536462304, 17.74785422909957],
              [96.49609099160668, 17.753045010044517]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry9 = /* color: #999900 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.22272293101784, 17.876554863345344],
              [96.22272829543587, 17.876383831544743],
              [96.2226263714933, 17.876388936974003],
              [96.22261296044823, 17.87620258871066],
              [96.22289727460381, 17.876200035993364],
              [96.22289995681282, 17.876381278830042],
              [96.22346053849694, 17.876381278830042],
              [96.22345517407891, 17.876483387388998],
              [96.22364292870995, 17.87649104552856],
              [96.22363756429192, 17.876580390465637],
              [96.22387628089425, 17.876577837753775],
              [96.22386018764016, 17.876741211239143],
              [96.22347931396004, 17.876731000400717],
              [96.22347931396004, 17.876651866382954],
              [96.22280071507927, 17.876654419093747],
              [96.2228060794973, 17.876562521481812]]]),
        {
          "system:index": "0",
          "Class": "Upland_Evergreen"
        }),
  var geometry10 = /* color: #009999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.22229109536644, 17.875689491797363],
              [96.2223554683828, 17.875794153477113],
              [96.22243057023522, 17.87593200047341],
              [96.22223745118615, 17.875939658636735],
              [96.22207115422722, 17.875819680706716]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry11 = /* color: #ff00ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.21175001393792, 17.87250366287218],
              [96.21185730229851, 17.8726083264287],
              [96.21183316241738, 17.872636406884595],
              [96.2118546200895, 17.87267214564022],
              [96.21174464951989, 17.872751281430666],
              [96.2116400433683, 17.872840628248493],
              [96.21158908139702, 17.872771703564418]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry12 = /* color: #ff9999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.21173123847481, 17.872033952493503],
              [96.21192972194191, 17.871944605270034],
              [96.21199677716729, 17.872064585816915],
              [96.21187607776162, 17.87214372187796],
              [96.21189753543374, 17.87217946073268],
              [96.21181706916329, 17.87225859674257],
              [96.21169636975762, 17.872192224607627]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry13 = /* color: #99ff99 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.21183852683541, 17.871814413521143],
              [96.2118733955526, 17.871694432805352],
              [96.21203164588448, 17.871681668894645],
              [96.21213893424508, 17.871778674593003],
              [96.21214966308114, 17.87182717742231],
              [96.21202896367546, 17.871888444135156],
              [96.21191094647881, 17.87188333857656]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry14 = /* color: #9999ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.21001194249627, 17.872388788166013],
              [96.2102533413076, 17.87221009403102],
              [96.21044109593865, 17.87205182193281],
              [96.21060471068856, 17.872176907957588],
              [96.21043036710259, 17.87236070767099],
              [96.21038476954934, 17.872488346248986],
              [96.21030430327889, 17.872567482121294],
              [96.21017555724617, 17.872452607456374],
              [96.21014873515603, 17.87249600456074],
              [96.21002803575036, 17.87249600456074]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry15 = /* color: #ffff99 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.20760868321892, 17.86992789884671],
              [96.20788763295647, 17.869805364047995],
              [96.20815585385796, 17.869841103373005],
              [96.20815317164895, 17.869915134809112],
              [96.20823363791939, 17.86997129656766],
              [96.20804588328835, 17.87025976350228],
              [96.20790104400155, 17.870183179406],
              [96.2076757384443, 17.87017552099455],
              [96.20771060716149, 17.870063197588806]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry16 = /* color: #99ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.16744528542992, 17.86427589333545],
              [96.16778860818383, 17.863946570400348],
              [96.1683250499868, 17.8641610133111],
              [96.1682526303434, 17.86429886933141],
              [96.16810510884758, 17.86424781155857],
              [96.16794149409768, 17.86442396081289],
              [96.16802464257714, 17.864503100276124],
              [96.16782615911004, 17.864722648279997],
              [96.16773764621254, 17.864452042561947]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry17 = /* color: #ff99ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.10957930814263, 17.727253110935095],
              [96.10967854987618, 17.72726205290651],
              [96.10972146522042, 17.727223730168784],
              [96.10977108608719, 17.72722500759351],
              [96.10976035725113, 17.727273549726227],
              [96.10981131922242, 17.727337420933456],
              [96.11003930698868, 17.72736935652852],
              [96.11005137692925, 17.727461331010556],
              [96.11002053152558, 17.72752264730569],
              [96.10999236833092, 17.72765038951986],
              [96.10989714991089, 17.72757757646894],
              [96.1099347008371, 17.727512427924626],
              [96.10982473026749, 17.727374466223214],
              [96.1098435057306, 17.72749965369747],
              [96.1097187830114, 17.72745622131836],
              [96.10955114494797, 17.727388517882844]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry18 = /* color: #d63000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.10794584285256, 17.727470272971576],
              [96.10802228580948, 17.727582686157685],
              [96.10812018643853, 17.727504763388445],
              [96.10821138154503, 17.72760057006717],
              [96.10818053614136, 17.72774747354173],
              [96.10816578399178, 17.727820286523624],
              [96.10805313121315, 17.727758970330306],
              [96.1080799533033, 17.72773214448913],
              [96.10803569685456, 17.72770531864395],
              [96.10797937046524, 17.72773214448913],
              [96.10786537658211, 17.72759162811265]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry19 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.10921586882111, 17.741194379772622],
              [96.10931376945015, 17.741191825122364],
              [96.1094840897226, 17.741310616320867],
              [96.10945994984147, 17.741345104073414],
              [96.10951627623078, 17.741479223047946],
              [96.10929901730057, 17.741535425255037],
              [96.10922123323914, 17.741457508554117],
              [96.10924134980675, 17.741411524911438],
              [96.10915820132729, 17.741397474351608]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry20 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.10902274977204, 17.742608373098616],
              [96.10910053383347, 17.742621146248506],
              [96.10932449828621, 17.742493414708584],
              [96.10940764676567, 17.742552171228258],
              [96.10939825903412, 17.74261220504367],
              [96.10929633509156, 17.742665852265944],
              [96.10924403201577, 17.742750155011343],
              [96.10907773505684, 17.742760373523236],
              [96.10901336204049, 17.742704171700588]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry21 = /* color: #ffc82d */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.1021549535894, 17.77335836791726],
              [96.10238562356469, 17.773330271813805],
              [96.10252509843346, 17.77352439025666],
              [96.10262568127152, 17.773733833603284],
              [96.10241915117737, 17.773820675894555],
              [96.10221262108323, 17.773616341024415],
              [96.10226626526352, 17.773583136585966],
              [96.10222469102379, 17.77349629417928],
              [96.1021710468435, 17.773514173501766]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry22 = /* color: #00ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.03156994115349, 17.79318672963231],
              [96.03185693751809, 17.793235253868687],
              [96.03193472157952, 17.79339614992652],
              [96.03204737435814, 17.793587692663422],
              [96.03162358533379, 17.79359790827029],
              [96.03143583070275, 17.79343445849033]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry23 = /* color: #bf04c2 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.72918306123253, 19.16164287464153],
              [95.7291776968145, 19.161437652527635],
              [95.72926352750298, 19.16137431231742],
              [95.72907577287194, 19.161123484846115],
              [95.72929839622017, 19.160986669700936],
              [95.7295371128225, 19.16126536709898],
              [95.72976510058876, 19.16158206811589]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry24 = /* color: #ff0000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.73274503480431, 19.150900040540787],
              [95.73318491708275, 19.151133147197246],
              [95.73324124347207, 19.151305443209914],
              [95.73316077720162, 19.15145746895401],
              [95.73287378083702, 19.151508144170908],
              [95.73277453910347, 19.151660169728217],
              [95.73257069121834, 19.151381456099475]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
var geometry25 = /* color: #00ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.76115499269005, 19.11411067206315],
              [95.76162706147667, 19.113951008927415],
              [95.76177726518151, 19.114161358740663],
              [95.76156537066933, 19.114315953011108],
              [95.76155732404229, 19.11455924861936],
              [95.76118717919823, 19.114744254415164],
              [95.76091895829674, 19.114473081465718]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry26 = /* color: #0000ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.75093041192528, 19.04811866134491],
              [95.75092504750725, 19.047931045769605],
              [95.75112353097435, 19.048017247546763],
              [95.75120667945382, 19.047854985340813],
              [95.75156073104378, 19.048047671692718],
              [95.75155000220772, 19.04837219556914],
              [95.75132201444146, 19.04839501363032]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry27 = /* color: #999900 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.76583008300301, 19.02816430343959],
              [95.76591323148247, 19.028389976037545],
              [95.76615463029381, 19.02844322458337],
              [95.76639066468712, 19.02875003730067],
              [95.76623509656426, 19.02900360110218],
              [95.76571474801537, 19.02904163563903],
              [95.76577107440468, 19.028884426163668],
              [95.76552431117531, 19.02877032241903],
              [95.7655028535032, 19.02834687005937]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry28 = /* color: #009999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.76048444043633, 18.79224312403091],
              [95.76053540240761, 18.791981583325352],
              [95.76074461471077, 18.791920641743364],
              [95.76086799632546, 18.791976504861026],
              [95.76097528468605, 18.792088231040747],
              [95.76105038653847, 18.79224312403091],
              [95.76085458528038, 18.79221011406136],
              [95.76071779262062, 18.792123780264195],
              [95.7605863643789, 18.79228629090443]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry29 = /* color: #ff00ff */ee.Feature(
        ee.Geometry.MultiPoint(),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry30 = /* color: #ff9999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.88497917186257, 18.526171810043632],
              [95.88537345658776, 18.526161637190395],
              [95.88541905414101, 18.52633457561307],
              [95.88553438912865, 18.526632131019127],
              [95.88529567252633, 18.526873735455084],
              [95.88503549825188, 18.526705883988424],
              [95.88501940499779, 18.526553291603]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry31 = /* color: #99ff99 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.8507836891317, 18.331561652640183],
              [95.85094998609063, 18.331467447163817],
              [95.85082928668496, 18.331174646031215],
              [95.85106800328728, 18.331169553833227],
              [95.85156152974602, 18.331177192130173],
              [95.85163394938942, 18.331533645612026],
              [95.85161785613533, 18.331800985241234],
              [95.8514488769674, 18.331877367916537],
              [95.85159103404519, 18.33210142356942],
              [95.85135768186089, 18.332131976590496],
              [95.85128258000847, 18.332055594027654],
              [95.85092316400048, 18.332134522675343],
              [95.85083196889397, 18.331879914005125]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry32 = /* color: #9999ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.31972770225045, 17.279791789478],
              [96.32356862555977, 17.27966885427609],
              [96.32376174460884, 17.285200857121623],
              [96.32041434775826, 17.28526232288637]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry33 = /* color: #ffff99 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.91463093291756, 18.02267181360586],
              [96.91935162078377, 18.023202338477937],
              [96.91806416045662, 18.025324421982745],
              [96.9161866141462, 18.02646707173821],
              [96.91408376227852, 18.026354847537046]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry34 = /* color: #99ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.86617414485451, 18.03631191639588],
              [96.86941961776253, 18.03623540418256],
              [96.8698273135328, 18.038250214702607],
              [96.86686615478035, 18.038760289655347],
              [96.86640481482979, 18.036975020851102]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry35 = /* color: #ff99ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.9151968790197, 17.61435718785637],
              [96.91637705098626, 17.61536954052216],
              [96.91599081288811, 17.617230618483855],
              [96.91441367398735, 17.617782802757873],
              [96.91402743588921, 17.61839633885808],
              [96.91273997556206, 17.61773167465534],
              [96.91338370572564, 17.61669888388208],
              [96.91392014752861, 17.615328637494233]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry36 = /* color: #d63000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.00000040065285, 18.48989920155062],
              [95.00091771613594, 18.489929726574964],
              [95.0008372498655, 18.490535138434392],
              [95.00009427796837, 18.49053259469155]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry37 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[94.99335388671395, 18.49231829286778],
              [94.993724031558, 18.4922267190551],
              [94.99418805371758, 18.492460740923548],
              [94.99404589663979, 18.49279651087206],
              [94.99353627692696, 18.493022900844668],
              [94.99339143764016, 18.492872822132206],
              [94.99358723889824, 18.49275326780955]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry38 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[94.99092380534645, 18.488341146210175],
              [94.9909130765104, 18.48804352423152],
              [94.99108473788735, 18.487387227785213],
              [94.99158631097313, 18.487682307118586],
              [94.99161045085427, 18.487837477943497],
              [94.99176870118615, 18.487855284422615],
              [94.99214421044823, 18.488343689985534],
              [94.99151925574776, 18.488590436016686]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry39 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.05169723760125, 17.777070207477028],
              [96.05164627562996, 17.776873538744656],
              [96.05173478852745, 17.776743277517056],
              [96.05194400083062, 17.77669730294348],
              [96.05226050149437, 17.776743277517056],
              [96.052373154273, 17.776924621553093],
              [96.05236510764595, 17.77711618195467],
              [96.05220149289605, 17.777236226368334],
              [96.052013738265, 17.777141723326025],
              [96.0519761873388, 17.777197914330184],
              [96.051834030261, 17.777208130874488]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry40 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.02855782042977, 17.772963106419247],
              [96.02873752843377, 17.772858384325065],
              [96.02887700330254, 17.772940118647742],
              [96.02903525363442, 17.773049949084967],
              [96.02897088061806, 17.773172550423574],
              [96.02888504992958, 17.77328748910216],
              [96.02875362168786, 17.773261947179968],
              [96.02864633332726, 17.77310358718097]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry41 = /* color: #ffc82d */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.07084955107209, 17.762986774426267],
              [96.07080127130982, 17.762792644542447],
              [96.07133503090378, 17.76259085141355],
              [96.07155228983399, 17.76242992761595],
              [96.07243205439087, 17.762999546121762],
              [96.07217456232544, 17.763298403535984],
              [96.0718419684076, 17.763385250896036],
              [96.07168908249375, 17.763523184851806],
              [96.07146914135453, 17.763405685562855],
              [96.07135917078492, 17.763275414521846],
              [96.0714101327562, 17.76314258904899],
              [96.07137794624802, 17.763022535171345],
              [96.07114727627274, 17.76308894796469],
              [96.07103462349411, 17.762951013674023]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry42 = /* color: #00ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.07399712335106, 17.76085261130042],
              [96.07388849388596, 17.76082834478693],
              [96.07390726934906, 17.760593342591214],
              [96.07405479084488, 17.76062910381483],
              [96.07412721048829, 17.76045285200066],
              [96.07428948413369, 17.760446466062106],
              [96.07458586822983, 17.760437525747736],
              [96.07472266088959, 17.760516711373683],
              [96.07478032838341, 17.76059206540452],
              [96.07469852100846, 17.760756822412233],
              [96.07459659706589, 17.760821958861783],
              [96.07438738476273, 17.76085516567008],
              [96.07424120437142, 17.760919024899465]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry43 = /* color: #bf04c2 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.07198010217186, 17.75193061417815],
              [96.07215981017586, 17.75194338666291],
              [96.07228453289505, 17.751807998277986],
              [96.0727431906366, 17.75184887025404],
              [96.0729041231775, 17.75203151678298],
              [96.07287595998284, 17.75207494320299],
              [96.07290948759552, 17.752129864836736],
              [96.0726895464563, 17.75236487814892],
              [96.07231940161225, 17.75223843080734],
              [96.0722375942373, 17.752293352390915],
              [96.07213835250374, 17.75222438109721]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry44 = /* color: #00ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.07008243929383, 17.726948444928567],
              [96.07025141846177, 17.727186046135277],
              [96.07059474121567, 17.72721670433255],
              [96.07061351667878, 17.72741853733372],
              [96.07069130074021, 17.72767657666241],
              [96.0704203976297, 17.727919286583035],
              [96.07007171045777, 17.72764336370034],
              [96.0696640146875, 17.72758715713513]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry45 = /* color: #0000ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.04275877605912, 17.65551458392973],
              [96.04305381905075, 17.65584684667051],
              [96.04276145826813, 17.656076874362572],
              [96.0423966778421, 17.655828955615476]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry46 = /* color: #999900 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.03993172775742, 17.614090677403123],
              [96.04074711929795, 17.61422361312188],
              [96.04068274628159, 17.614660766429676],
              [96.03985394369599, 17.61462497614018]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry47 = /* color: #009999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.2141237689161, 17.26760287729767],
              [96.21481041442391, 17.266726904248717],
              [96.2171493006849, 17.26734162261344],
              [96.21699373256203, 17.267879499500875],
              [96.21643583308693, 17.267700207379466],
              [96.21629635821816, 17.267874376871262],
              [96.21665577422615, 17.26829443202729],
              [96.21622662078377, 17.268842551340104],
              [96.2158725691938, 17.268550562750182],
              [96.21568481456276, 17.268642769723286],
              [96.21420959960457, 17.268663260155495]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry48 = /* color: #ff00ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.22042427789208, 17.28203918417591],
              [96.21995220910546, 17.28132206975864],
              [96.22137914430138, 17.279027284859435],
              [96.22187267076012, 17.279437069974094],
              [96.22187267076012, 17.279887832547214],
              [96.22206578980919, 17.280113213420087],
              [96.22265587579247, 17.280113213420087],
              [96.22252712975975, 17.28150647087549],
              [96.22110019456383, 17.283391449479264],
              [96.22012387048241, 17.28302265083587]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry49 = /* color: #ff9999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.22243057023522, 17.28335559408801],
              [96.22338543664452, 17.281957228383835],
              [96.22433493863579, 17.28244384036464],
              [96.22425983678338, 17.28332486088995],
              [96.22407744657036, 17.284021478786343],
              [96.22346590291497, 17.28415465543706],
              [96.22254858743187, 17.28353487097444]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry50 = /* color: #99ff99 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.19907389413353, 16.77086474995629],
              [96.19992951880928, 16.770667004238412],
              [96.20067785512444, 16.77127821761083],
              [96.20060811769005, 16.77144514529111],
              [96.19942526351448, 16.77127821761083]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry51 = /* color: #9999ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.278402907958, 16.53370538777808],
              [96.27899031173226, 16.533710530390728],
              [96.27893934976098, 16.53417079366707],
              [96.27877037059304, 16.534787904717444],
              [96.27824733983513, 16.534710765944055]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry52 = /* color: #ffff99 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.27079079877373, 16.536813429307603],
              [96.27138893138405, 16.536947135038403],
              [96.27117167245385, 16.53737396425143],
              [96.27068351041314, 16.5371656922835]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry53 = /* color: #99ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.81757251750466, 16.840053475384074],
              [96.81838790904519, 16.8407979585599],
              [96.81846837531563, 16.84129085615491],
              [96.81753496657845, 16.842312587706534],
              [96.81618313323494, 16.840638793437368]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry54 = /* color: #ff99ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.81633870135781, 16.836223191522823],
              [96.8180123997831, 16.83579702914456],
              [96.81925694476601, 16.836746907830598],
              [96.81887070666787, 16.837845680474217],
              [96.81697170268532, 16.837501672902345]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry55 = /* color: #d63000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.81666324864861, 16.830283787821305],
              [96.81663106214043, 16.828666368766896],
              [96.81936691533562, 16.82866123408124],
              [96.81913624536034, 16.83088967457785],
              [96.81706021558281, 16.83064834703419]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry56 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.82240049373146, 16.818753598936286],
              [96.82314883004662, 16.818902512549727],
              [96.82325075398919, 16.819585459692018],
              [96.82238708268639, 16.81957005489639]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry57 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.75269792806145, 16.737666913715216],
              [96.75266574155327, 16.735457928243488],
              [96.75744007359978, 16.7344407588804],
              [96.7590815855169, 16.735560672321657],
              [96.75914595853325, 16.737307313174338],
              [96.75770829450127, 16.737317587484927],
              [96.7569572759771, 16.7383347414904],
              [96.75597022305962, 16.738118982003638],
              [96.75506900083062, 16.737471702077244]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry58 = /* color: #ffc82d */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.74350063334938, 16.679224213540348],
              [96.74428920279976, 16.678843947964562],
              [96.7449436617994, 16.679100884247262],
              [96.74442331325051, 16.679876829725472],
              [96.74357037078377, 16.67960447835996]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry59 = /* color: #bf04c2 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.66597406398293, 16.571018504246137],
              [96.66815201770302, 16.57231418748112],
              [96.66549126636025, 16.575481376457848],
              [96.66389266978737, 16.57596467668682],
              [96.6617898179197, 16.574195997603425]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry60 = /* color: #ff0000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.62353078853127, 16.535810633373735],
              [96.62945310603615, 16.539307540185238],
              [96.62295143138405, 16.547597013108913],
              [96.61681453715798, 16.543421467057158]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry61 = /* color: #00ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.49277846347329, 16.482325784737558],
              [96.49378697406289, 16.482577839574446],
              [96.4936635924482, 16.48321569116543],
              [96.49256925117012, 16.48302022073987]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry62 = /* color: #0000ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.11485521327492, 16.320592219780504],
              [96.11383597384926, 16.32102982099681],
              [96.11287574302193, 16.320123727981887],
              [96.11364821921822, 16.319567714281852],
              [96.1148337556028, 16.319449303752794],
              [96.1164001656675, 16.31942871060999],
              [96.1171029044294, 16.320520144192187],
              [96.11586908828255, 16.321210009448478]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry63 = /* color: #999900 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.14897291194436, 16.327858847271326],
              [96.14976684581276, 16.326108497634362],
              [96.15522782336708, 16.328610463190415],
              [96.15590374003884, 16.33050493433451],
              [96.15502397548195, 16.330515230323204],
              [96.14934842120644, 16.328044177492284]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry64 = /* color: #009999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.19960228930947, 16.35040606784504],
              [96.20046059619423, 16.3480176270427],
              [96.20492379199501, 16.3498295503256],
              [96.2027780247831, 16.35450341118275],
              [96.19932333957192, 16.35287683793723]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry66 = /* color: #ff9999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.20683888923165, 16.359820563975017],
              [96.20698104630944, 16.35975365007692],
              [96.20716075431343, 16.359859168136552],
              [96.20720635186669, 16.359987848619877],
              [96.20707492362496, 16.360041894397572],
              [96.20700786839959, 16.359987848619877]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry67 = /* color: #99ff99 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.2073163224363, 16.359352166206634],
              [96.20738337766167, 16.359208043590225],
              [96.20754162799355, 16.359264663202218],
              [96.20749066602227, 16.35933157726795],
              [96.20755503903862, 16.359411359393263],
              [96.2074075175428, 16.359560629088516],
              [96.20732168685433, 16.35948084702422]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry68 = /* color: #9999ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.20829532872673, 16.359339298120204],
              [96.20842943917748, 16.359099951558083],
              [96.20874593984124, 16.359233779779526],
              [96.20850185882088, 16.35939849131074]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry69 = /* color: #ffff99 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.10939155351159, 16.82160604453298],
              [96.11017475854393, 16.822181149875874],
              [96.11125837098595, 16.82206818289269],
              [96.11162315141198, 16.822283847074868],
              [96.11109743844506, 16.823023265264776],
              [96.10976706277367, 16.823855107279712],
              [96.1080611778402, 16.822561129234188]]]),
        {
          "Class": "Mangrove",
          "system:index": "0"
        }),
  var geometry70 = /* color: #99ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.1463523937368, 16.83680980503503],
              [96.14675204288002, 16.8366763089032],
              [96.14694784413811, 16.836830342893112],
              [96.14705245028969, 16.837017750745183],
              [96.14684592019555, 16.837176918912235],
              [96.14650527965065, 16.83692789768858],
              [96.14635775815483, 16.836968973376898]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry71 = /* color: #ff99ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.16040716897484, 16.844856623961444],
              [96.16051982175347, 16.844877160946442],
              [96.16061906348702, 16.84483095272706],
              [96.1605251861715, 16.844676925247605],
              [96.16070757638451, 16.844605045714303],
              [96.1609033776426, 16.844640985484357],
              [96.16091678868767, 16.844815549984748],
              [96.16085241567131, 16.844854056838155],
              [96.16069952975747, 16.84503888962545],
              [96.16042058001992, 16.84503888962545]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry72 = /* color: #d63000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.21513496171471, 19.070340098411865],
              [96.21713052522179, 19.070431358548262],
              [96.21700177918908, 19.071475776530864],
              [96.2152958942556, 19.071364237060234]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry73 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.39417241345879, 19.46712807913953],
              [96.39564226399895, 19.46714325238743],
              [96.39559130202767, 19.467522583123007],
              [96.39522115718361, 19.467952490216835],
              [96.39419387113091, 19.4679297304581]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry74 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.39723281394478, 19.457898687975486],
              [96.39951805602547, 19.457893629937963],
              [96.39931420814034, 19.459714513253473],
              [96.39749030601021, 19.459653817472372]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry75 = /* color: #ffc82d */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.43722991477486, 19.301608663931102],
              [96.4414141608381, 19.30163904128664],
              [96.44116739760872, 19.30549691958998],
              [96.4373264742994, 19.305172901815226]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry76 = /* color: #00ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.49473647605416, 19.183423469031005],
              [96.4996073676252, 19.183443735189037],
              [96.49933914672371, 19.187952893335176],
              [96.49428586493966, 19.18756784645038]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry77 = /* color: #bf04c2 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.31028638612267, 18.453077613879014],
              [95.31097839604851, 18.453097968264956],
              [95.31155775319573, 18.453545764145293],
              [95.3114987445974, 18.453723864454915],
              [95.31041513215538, 18.453642447193438]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry78 = /* color: #ff0000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.29499779473778, 18.481492530085994],
              [95.29484222661492, 18.47987970445822],
              [95.2973420454168, 18.479961109269897],
              [95.29714892636773, 18.481579021883405],
              [95.29496024381157, 18.48148744233185]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry79 = /* color: #00ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.265319151988, 18.517025534869692],
              [95.26572148334023, 18.517040794964498],
              [95.26590923797127, 18.517297673022526],
              [95.26567856799599, 18.51754692067052],
              [95.26535938512322, 18.5175138572279]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry80 = /* color: #999900 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.46950767766472, 18.74320666897791],
              [95.46979467402932, 18.742744394399217],
              [95.47018627654549, 18.742985691727313],
              [95.4704035354757, 18.742942512230773],
              [95.47051618825432, 18.743381926591724],
              [95.47020773421761, 18.743483525125136],
              [95.46987782250878, 18.743412406158168]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry81 = /* color: #009999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.46505252849099, 18.739617657840707],
              [95.46586255561348, 18.739643058045967],
              [95.466854972949, 18.739825939411162],
              [95.46683351527687, 18.740516822781302],
              [95.46627561580178, 18.740648903103768],
              [95.46558360587593, 18.740384742355516],
              [95.46502570640084, 18.74063874308263],
              [95.46451608668801, 18.740034220724755]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var geometry82 = /* color: #ff00ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.46910266410347, 18.747914431688162],
              [95.46930114757058, 18.747703620195917],
              [95.46980003844735, 18.747670601504623],
              [95.46982149611947, 18.74822429870493],
              [95.46919117700097, 18.748234458269604]]]),
        {
          "Class": "Indaing",
          "system:index": "0"
        }),
  var table2 = ee.FeatureCollection("users/pawlokdass/Sumalika/Rakhine"),
  var table3 = ee.FeatureCollection("users/pawlokdass/Sumalika/Ayeyarwady"),
  var table4 = ee.FeatureCollection("users/pawlokdass/Sumalika/Kayin"),
  var geometry83 = /* color: #00ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.00854890057127, 18.38504412638373],
              [95.00979344555418, 18.38502885455484],
              [95.00978539892714, 18.385856076671686],
              [95.00857035824339, 18.385866257842256]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry84 = /* color: #bf04c2 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.0234861225752, 18.432961729467277],
              [95.02427469202559, 18.432946461888744],
              [95.02426932760756, 18.434213666292536],
              [95.02352903791945, 18.434223844603338]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry85 = /* color: #ff0000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[94.99068270632307, 18.582175507542587],
              [94.99171803900282, 18.582165338026286],
              [94.99172340342085, 18.582617880914075],
              [94.99069343515913, 18.58262805040337]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry86 = /* color: #00ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[97.14813884922798, 18.16849269925178],
              [97.1536108533031, 18.168716977888142],
              [97.1533748061207, 18.174690839306663],
              [97.14813881180875, 18.174670449935153]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry87 = /* color: #0000ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[97.14683006712477, 18.13056228126328],
              [97.15069244810621, 18.130705027277575],
              [97.15054224440138, 18.1326830672024],
              [97.14685152479689, 18.132662675152304]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var table5 = ee.FeatureCollection("users/pawlokdass/Sumalika/Mon"),
  var table6 = ee.FeatureCollection("users/pawlokdass/Sumalika/Magway_Mandalay_NPT"),
  var geometry65 = /* color: #d63000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.9928525541286, 16.6101311883955],
              [95.99290620665371, 16.60956573024248],
              [95.9929598423512, 16.60858901263761],
              [95.99628577725743, 16.607828201369617],
              [95.99635015019062, 16.610583557602467]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry88 = /* color: #d63000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.98925302931349, 16.629867401224647],
              [95.99164555975477, 16.629846841050345],
              [95.9914524407057, 16.63281776339049],
              [95.98926375814955, 16.632797203532434]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry89 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[97.02390442797224, 17.5797061320022],
              [97.02388297030012, 17.57871403512515],
              [97.02483783670942, 17.578642440294605],
              [97.02484856554548, 17.57975727086898]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry90 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.90258811422865, 17.627772835803047],
              [96.90258811422865, 17.62635666044114],
              [96.90346787878553, 17.626366885573866],
              [96.90349470087568, 17.627788173381468]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry91 = /* color: #ffc82d */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.9031191916136, 17.624030427676647],
              [96.90311382719557, 17.622598884908115],
              [96.90372537085096, 17.622598884908115],
              [96.90374682852308, 17.62401508977863]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry92 = /* color: #00ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.92307214447538, 17.61687260022533],
              [96.92371587463896, 17.61689816440012],
              [96.92368905254881, 17.617521929142658],
              [96.92306678005735, 17.617501477873816]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry93 = /* color: #bf04c2 */ee.Feature(
        ee.Geometry.Polygon(
            [[[97.21933017679731, 17.54480304180983],
              [97.22005437323133, 17.544787697188834],
              [97.22005437323133, 17.545631649414744],
              [97.21939454981367, 17.54562141971432]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var table7 = ee.FeatureCollection("users/pawlokdass/Sumalika/Kayah"),
  var geometry94 = /* color: #ff0000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.9767109603552, 17.61057603367874],
              [96.97808961578886, 17.610545355593878],
              [96.97806279369871, 17.61222752955187],
              [96.97680215546171, 17.61223264251872]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry95 = /* color: #00ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.92710350462477, 17.63437043034911],
              [96.92803691336195, 17.63437043034911],
              [96.92801545568983, 17.635014583944855],
              [96.92710350462477, 17.634994134659735]]]),
        {
          "Class": "Lowland_Evergreen",
          "system:index": "0"
        }),
  var geometry96 = /* color: #0000ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.92747633167784, 17.6255309790598],
              [96.92829172321836, 17.625510528698978],
              [96.9282809943823, 17.626584169507257],
              [96.9274870605139, 17.626573944386845]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry97 = /* color: #999900 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.9506479353575, 17.61908644433706],
              [96.95129434773008, 17.619073662405153],
              [96.95128630110304, 17.619613059144697],
              [96.95066939302961, 17.61961050276586]]]),
        {
          "Class": "Lowland_Evergreen",
          "system:index": "0"
        }),
  var geometry98 = /* color: #009999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.92242036768477, 17.63297475632766],
              [96.92244182535688, 17.63097069268068],
              [96.92444811770002, 17.63106271649943],
              [96.92438374468367, 17.63325082457389]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry99 = /* color: #d63000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.92901323744337, 17.61957982621685],
              [96.92900250860731, 17.618352759979302],
              [96.93018268057386, 17.61831185762765],
              [96.93011294313948, 17.61960539000805]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry100 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.90701375910322, 17.630086239138624],
              [96.91330085703413, 17.630515685331037],
              [96.9130433649687, 17.63391031922842],
              [96.90682064005415, 17.633439982202212]]]),
        {
          "Class": "Rubber",
          "system:index": "0"
        }),
  var geometry101 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.4667640180258, 17.92429552713697],
              [96.4671422094969, 17.924298079162227],
              [96.4671422094969, 17.924765099167065],
              [96.46677206465284, 17.924767651185554]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry102 = /* color: #ffc82d */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.95841293045561, 17.623493600469963],
              [96.95934633919279, 17.623508938412332],
              [96.9593302459387, 17.624214482351135],
              [96.95839683720152, 17.624209369723832]]]),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry103 = /* color: #00ffff */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.48206069301683, 17.828518472917885],
              [96.4823074562462, 17.82875849250725],
              [96.48213043045122, 17.8289551040576],
              [96.48185148071367, 17.828911696331375]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry104 = /* color: #bf04c2 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.48051842283327, 17.826345514898925],
              [96.48071422409136, 17.826534468822214],
              [96.48066594432909, 17.826708101980437],
              [96.48044868539888, 17.826782151364107],
              [96.48025556634981, 17.826603411419992]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry105 = /* color: #ff0000 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.48267223667223, 17.82068701808469],
              [96.48295118640978, 17.820998546499684],
              [96.48273124527056, 17.82120538063837],
              [96.48237182926256, 17.82092194120221]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry106 = 
    /* color: #d63000 */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Feature(
        ee.Geometry.Polygon(
            [[[95.95322559782545, 19.24907956683779],
              [95.95322559782545, 19.24851234000107],
              [95.95484565207045, 19.24851234000107],
              [95.95484565207045, 19.24907956683779]]], null, false),
        {
          "Class": "MDF",
          "system:index": "0"
        }),
  var geometry107 = 
    /* color: #ffc82d */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Feature(
        ee.Geometry.Polygon(
            [[[95.96574078508894, 19.246007908785817],
              [95.96574078508894, 19.245471059101668],
              [95.96691022821943, 19.245471059101668],
              [95.96691022821943, 19.246007908785817]]], null, false),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry108 = 
    /* color: #00ffff */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Feature(
        ee.Geometry.Polygon(
            [[[95.89869628855269, 19.29275520406712],
              [95.89869628855269, 19.292269139314286],
              [95.89913617083113, 19.292269139314286],
              [95.89913617083113, 19.29275520406712]]], null, false),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry109 = 
    /* color: #bf04c2 */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Feature(
        ee.Geometry.Polygon(
            [[[95.85867773005049, 19.35779889548858],
              [95.85867773005049, 19.35692837507645],
              [95.85987935968916, 19.35692837507645],
              [95.85987935968916, 19.35779889548858]]], null, false),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry110 = /* color: #00ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.14725123354475, 19.375744751638827],
              [96.14784131952803, 19.37575993342162],
              [96.14780913301985, 19.376109114035174],
              [96.14725123354475, 19.376109114035174]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry111 = /* color: #0000ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.83102951952498, 19.444700980357414],
              [95.83159814783613, 19.444700980357414],
              [95.83160351225416, 19.44505507139619],
              [95.831034883943, 19.445060129834]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry112 = /* color: #999900 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.14559362837355, 19.37715159078336],
              [96.14559899279158, 19.37688338137036],
              [96.14628027388136, 19.37688844192941],
              [96.14626418062727, 19.37721737793043],
              [96.14567945906202, 19.377227499027622],
              [96.145674094644, 19.377161711884636]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry113 = /* color: #009999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.842200920072, 19.431983541561856],
              [95.84221164890806, 19.43153836257565],
              [95.84309141346495, 19.431508009418536],
              [95.84306995579283, 19.43187224692969],
              [95.8427588195471, 19.43189248232304],
              [95.8427588195471, 19.432024012318266]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry114 = /* color: #ff00ff */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.83801935621779, 19.430412762536918],
              [95.83800594517271, 19.429795576283155],
              [95.8390493244795, 19.42977281117157],
              [95.83905468889753, 19.430220524447048],
              [95.83886693426649, 19.430223053897073],
              [95.83877573915998, 19.43022558334706],
              [95.83838413664381, 19.43023317169679],
              [95.83839486547987, 19.430407703642718]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry115 = /* color: #ff9999 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.81464926907103, 19.444230543873843],
              [95.81463854023497, 19.443297254657836],
              [95.81501404949705, 19.44329472541148],
              [95.81502477833311, 19.444225485410165]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry116 = /* color: #99ff99 */ee.Feature(
        ee.Geometry.Polygon(
            [[[95.80478142210524, 19.44654224527125],
              [95.80478142210524, 19.44549515484483],
              [95.80542515226881, 19.445469862721982],
              [95.80543588110487, 19.44586441938956],
              [95.80610106894056, 19.44586441938956],
              [95.80610106894056, 19.446456252592316],
              [95.80534468599836, 19.446461310986457],
              [95.80534468599836, 19.44654224527125]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry117 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.1364365667967, 19.375141274576052],
              [96.13667796560804, 19.37506536535975],
              [96.13680671164076, 19.3752095928405],
              [96.13668333002607, 19.37541201715954],
              [96.13643924900572, 19.375212123146042]]]),
        {
          "Class": "Bamboo",
          "system:index": "0"
        }),
  var geometry118 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[96.13662432142775, 19.37639124125181],
              [96.13662163921873, 19.375933258623462],
              [96.13719563194792, 19.375933258623462],
              [96.13720099636595, 19.376388710964573]]]),
        {
          "Class": "Upland_Evergreen",
          "system:index": "0"
        }),
  var geometry119 = /* color: #98ff00 */ee.Feature(
        ee.Geometry.Polygon(
            [[[94.96497641512434, 18.82848912199023],
              [94.96652673193495, 18.82850435407595],
              [94.96653209635298, 18.82923549256679],
              [94.96503542372267, 18.82922533788732]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        }),
  var geometry120 = /* color: #0b4a8b */ee.Feature(
        ee.Geometry.Polygon(
            [[[94.9575842470793, 18.781522042086362],
              [94.95895217367689, 18.781516963306647],
              [94.95895217367689, 18.78281712591299],
              [94.95758961149733, 18.78281712591299]]]),
        {
          "Class": "DDF",
          "system:index": "0"
        });
//----------------------------------------------------ROI--------------------------------------------

var state = ee.FeatureCollection(table);
//print(state);

var roi = state;
Map.centerObject(roi,8);
//print(roi);

var empty = ee.Image().byte();
var outline_roi = empty.paint({
  featureCollection: roi,
  color: 'AREA',
  width: 4
});

var palette = ['FF0000'];
Map.addLayer(outline_roi, {palette: palette, max: 14}, 'different color edges');

var train =ee.FeatureCollection([geometry,geometry2,geometry3,geometry4,geometry5,
                                 geometry6,geometry7,geometry8,geometry9,geometry10,
                                 geometry11,geometry12,geometry13,geometry14,geometry15,
                                 geometry16,geometry17,geometry18,geometry19,geometry20,
                                 geometry21,geometry22,geometry23,geometry24,geometry25,
                                 geometry26,geometry27,geometry28,geometry29,geometry30,
                                 geometry31,geometry32,geometry33,geometry34,geometry35,
                                 geometry36,geometry37,geometry38,geometry39,geometry40,
                                 geometry41,geometry42,geometry43,geometry44,geometry45,
                                 geometry46,geometry47,geometry48,geometry49,geometry50,
                                 geometry51,geometry52,geometry53,geometry54,geometry55,
                                 geometry56,geometry57,geometry58,geometry59,geometry60,
                                 geometry61,geometry62,geometry63,geometry64,geometry65,
                                 geometry66,geometry67,geometry68,geometry69,geometry70,
                                 geometry71,geometry72,geometry73,geometry74,geometry75,
                                 geometry76,geometry77,geometry78,geometry79,geometry80,
                                 geometry81,geometry82,geometry83,geometry84,geometry85,
                                 geometry86,geometry87,geometry88,geometry89,geometry90,
                                 geometry91,geometry92,geometry93,geometry94,geometry95,
                                 geometry96,geometry97,geometry98,geometry99,geometry100,
                                 geometry101,geometry102,geometry103,geometry104,geometry105,
                                 geometry106,geometry107,geometry108,geometry109,geometry110,
                                 geometry111,geometry112,geometry113,geometry114,geometry115,
                                 geometry116,geometry117,geometry118]);
//print(train);

var training = train.remap(['Mangrove','MDF','Rubber', 'Bamboo', 'Upland_Evergreen', 'Indaing', 'DDF', 'Lowland_Evergreen'], [0, 1, 2, 3, 4, 5, 6, 7], 'Class');
//print(training);

var mangrove = training.filter(ee.Filter.eq('Class', 0));//.limit(2);
var mangrove_size = mangrove.size();
//print(mangrove_size,'mangrove_size');

var mdf = training.filter(ee.Filter.eq('Class', 1));//.limit(10);
var mdf_size = mdf.size();
//print(mdf_size,'mdf_size');

var rubber = training.filter(ee.Filter.eq('Class', 2));//.limit(1);
var rubber_size = rubber.size();
//print(rubber_size,'rubber_size');

var bamboo = training.filter(ee.Filter.eq('Class', 3));//.limit(5);
var bamboo_size = bamboo.size();
//print(bamboo_size,'bamboo_size');

var up_evg = training.filter(ee.Filter.eq('Class', 4));//.limit(6);
var up_evg_size = up_evg.size();
//print(up_evg_size,'up_evg_size');

var ind = training.filter(ee.Filter.eq('Class', 5));//.limit(1);
var ind_size = ind.size();
//print(ind_size,'ind_size');

var ddf = training.filter(ee.Filter.eq('Class', 6));//.limit(4);
var ddf_size = ddf.size();
//print(ddf_size,'ddf_size');

var op = training.filter(ee.Filter.eq('Class', 7));//.limit(5);
var op_size = op.size();
print(op);
//print(op_size,'op_size');

//var training1 = mangrove.merge(mdf).merge(rubber).merge(bamboo).merge(up_evg).merge(ind).merge(ddf).merge(op);
//print(training1);
//----------------------------------------------------TP_PCT----------------------------------------------
//Load TP_PCT_Map
var tc = ee.Image(tcc);
var tc_gte25 = tc.gte(25);
var tc_gte10 = tc.gte(10);
//Map.addLayer(tc.clip(roi), {}, 'PCT');
//Map.addLayer(tc_gte10.updateMask(tc_gte10), {}, 'tc_gte10');


//---------------------------------------------------Rainfall----------------------------------------------
//Load CHIRPS data
//-----------------------------------------------------SRTM------------------------------------------------
// Load SRTM
var dataset = ee.Image('CGIAR/SRTM90_V4');
var elevation = dataset.select('elevation').unmask(0);
var slope = ee.Terrain.slope(elevation);

//Map.addLayer(dataset, {}, 'elevation');
//print(elevation);

var elev5m = elevation.lte(5);
//Map.addLayer(elev5m, {}, 'elev5m');
//-----------------------------------------------------GEDI-------------------------------------------
// Load GEDI
var gedi = ee.ImageCollection('users/potapovpeter/GEDI_V27');
//print(gedi);

var gedi_sasia= gedi.filterMetadata('system:index', 'equals', 'GEDI_SASIA_v27').first();
//print(gedi_sasia,"gedi_sasia");

var gedi_roi  = ee.Image(gedi_sasia).rename('ht');
//print(gedi_roi);
//Map.addLayer(gedi_roi.clip(roi), {min:0, max:25}, 'gedi_roi');


//----------------------------------------------------Radar--Processing---------------------------------------

function toDB(img) {
  return ee.Image(img).log10().multiply(10.0);
}

// The RL speckle filter
function RefinedLee(img) {
  // img must be in natural units, i.e. not in dB!
  // Set up 3x3 kernels 
  var weights3 = ee.List.repeat(ee.List.repeat(1,3),3);
  var kernel3 = ee.Kernel.fixed(3,3, weights3, 1, 1, false);

  var mean3 = img.reduceNeighborhood(ee.Reducer.mean(), kernel3);
  var variance3 = img.reduceNeighborhood(ee.Reducer.variance(), kernel3);

  // Use a sample of the 3x3 windows inside a 7x7 windows to determine gradients and directions
  var sample_weights = ee.List([[0,0,0,0,0,0,0], [0,1,0,1,0,1,0],[0,0,0,0,0,0,0], [0,1,0,1,0,1,0], [0,0,0,0,0,0,0], [0,1,0,1,0,1,0],[0,0,0,0,0,0,0]]);

  var sample_kernel = ee.Kernel.fixed(7,7, sample_weights, 3,3, false);

  // Calculate mean and variance for the sampled windows and store as 9 bands
  var sample_mean = mean3.neighborhoodToBands(sample_kernel); 
  var sample_var = variance3.neighborhoodToBands(sample_kernel);

  // Determine the 4 gradients for the sampled windows
  var gradients = sample_mean.select(1).subtract(sample_mean.select(7)).abs();
  gradients = gradients.addBands(sample_mean.select(6).subtract(sample_mean.select(2)).abs());
  gradients = gradients.addBands(sample_mean.select(3).subtract(sample_mean.select(5)).abs());
  gradients = gradients.addBands(sample_mean.select(0).subtract(sample_mean.select(8)).abs());

  // And find the maximum gradient amongst gradient bands
  var max_gradient = gradients.reduce(ee.Reducer.max());

  // Create a mask for band pixels that are the maximum gradient
  var gradmask = gradients.eq(max_gradient);

  // duplicate gradmask bands: each gradient represents 2 directions
  gradmask = gradmask.addBands(gradmask);

  // Determine the 8 directions
  var directions = sample_mean.select(1).subtract(sample_mean.select(4)).gt(sample_mean.select(4).subtract(sample_mean.select(7))).multiply(1);
  directions = directions.addBands(sample_mean.select(6).subtract(sample_mean.select(4)).gt(sample_mean.select(4).subtract(sample_mean.select(2))).multiply(2));
  directions = directions.addBands(sample_mean.select(3).subtract(sample_mean.select(4)).gt(sample_mean.select(4).subtract(sample_mean.select(5))).multiply(3));
  directions = directions.addBands(sample_mean.select(0).subtract(sample_mean.select(4)).gt(sample_mean.select(4).subtract(sample_mean.select(8))).multiply(4));
  // The next 4 are the not() of the previous 4
  directions = directions.addBands(directions.select(0).not().multiply(5));
  directions = directions.addBands(directions.select(1).not().multiply(6));
  directions = directions.addBands(directions.select(2).not().multiply(7));
  directions = directions.addBands(directions.select(3).not().multiply(8));

  // Mask all values that are not 1-8
  directions = directions.updateMask(gradmask);

  // "collapse" the stack into a singe band image (due to masking, each pixel has just one value (1-8) in it's directional band, and is otherwise masked)
  directions = directions.reduce(ee.Reducer.sum());  

  //var pal = ['ffffff','ff0000','ffff00', '00ff00', '00ffff', '0000ff', 'ff00ff', '000000'];
  //Map.addLayer(directions.reduce(ee.Reducer.sum()), {min:1, max:8, palette: pal}, 'Directions', false);

  var sample_stats = sample_var.divide(sample_mean.multiply(sample_mean));

  // Calculate localNoiseVariance
  var sigmaV = sample_stats.toArray().arraySort().arraySlice(0,0,5).arrayReduce(ee.Reducer.mean(), [0]);

  // Set up the 7*7 kernels for directional statistics
  var rect_weights = ee.List.repeat(ee.List.repeat(0,7),3).cat(ee.List.repeat(ee.List.repeat(1,7),4));

  var diag_weights = ee.List([[1,0,0,0,0,0,0], [1,1,0,0,0,0,0], [1,1,1,0,0,0,0], 
    [1,1,1,1,0,0,0], [1,1,1,1,1,0,0], [1,1,1,1,1,1,0], [1,1,1,1,1,1,1]]);

  var rect_kernel = ee.Kernel.fixed(7,7, rect_weights, 3, 3, false);
  var diag_kernel = ee.Kernel.fixed(7,7, diag_weights, 3, 3, false);

  // Create stacks for mean and variance using the original kernels. Mask with relevant direction.
  var dir_mean = img.reduceNeighborhood(ee.Reducer.mean(), rect_kernel).updateMask(directions.eq(1));
  var dir_var = img.reduceNeighborhood(ee.Reducer.variance(), rect_kernel).updateMask(directions.eq(1));

  dir_mean = dir_mean.addBands(img.reduceNeighborhood(ee.Reducer.mean(), diag_kernel).updateMask(directions.eq(2)));
  dir_var = dir_var.addBands(img.reduceNeighborhood(ee.Reducer.variance(), diag_kernel).updateMask(directions.eq(2)));

  // and add the bands for rotated kernels
  for (var i=1; i<4; i++) {
    dir_mean = dir_mean.addBands(img.reduceNeighborhood(ee.Reducer.mean(), rect_kernel.rotate(i)).updateMask(directions.eq(2*i+1)));
    dir_var = dir_var.addBands(img.reduceNeighborhood(ee.Reducer.variance(), rect_kernel.rotate(i)).updateMask(directions.eq(2*i+1)));
    dir_mean = dir_mean.addBands(img.reduceNeighborhood(ee.Reducer.mean(), diag_kernel.rotate(i)).updateMask(directions.eq(2*i+2)));
    dir_var = dir_var.addBands(img.reduceNeighborhood(ee.Reducer.variance(), diag_kernel.rotate(i)).updateMask(directions.eq(2*i+2)));
  }

  // "collapse" the stack into a single band image (due to masking, each pixel has just one value in it's directional band, and is otherwise masked)
  dir_mean = dir_mean.reduce(ee.Reducer.sum());
  dir_var = dir_var.reduce(ee.Reducer.sum());

  // A finally generate the filtered value
  var varX = dir_var.subtract(dir_mean.multiply(dir_mean).multiply(sigmaV)).divide(sigmaV.add(1.0));

  var b = varX.divide(dir_var);

  var result = dir_mean.add(b.multiply(img.subtract(dir_mean)));
  result= result.arrayFlatten([['sum']]);
  return(result);
}

//-----------------------------------------------------PALSAR-----------------------------------------------
//Load PALSAR

var palsar = ee.ImageCollection('JAXA/ALOS/PALSAR/YEARLY/SAR')
                  .filterBounds(roi)
                  .filterDate('2017-01-01', '2018-01-01')
                  .select('HH', 'HV');
//print(palsar,'PALSAR');

var pal_HH = palsar.select('HH');
//print(pal_HH, 'pal_HH');
//Map.addLayer(pal_HH, {},'pal_HH');

// Convert DN to gamma_nought in natural values

function toGamma(img) { 
  return ee.Image(img).pow(2).divide(ee.Number(10.0).pow(8.3));
}

var palsar_gn = palsar.map(function(img) { return ee.Image(img).pow(2).divide(ee.Number(10.0).pow(8.3))});

var pal_HH_gn = palsar_gn.select('HH').first();
var pal_HV_gn = palsar_gn.select('HV').first();
var pal_HH_HV = pal_HH_gn.divide(pal_HV_gn);

//Map.addLayer(pal_HH, {min:-25, max:0}, "pal_HH");


var pal_HH_urf = toDB(pal_HH_gn);
//print(pal_HH_urf,'pal_HH_urf');
//Map.addLayer(pal_HH_urf.clip(roi),{min:-25.0, max:0.0}, "pal_HH_urf");

var pal_HH_rf = toDB(RefinedLee(pal_HH_gn)).rename('HH');
//print(pal_HH_rf,'pal_HH_rf');
//Map.addLayer(pal_HH_rf.clip(roi),{}, "pal_HH_rf");

var pal_HV_rf = toDB(RefinedLee(pal_HV_gn)).rename('HV');
//print(pal_HV_rf, 'pal_HV_rf');
//Map.addLayer(pal_HV_rf.clip(roi),{min:-25.0, max:0.0}, "pal_HV_rf");

var pal_HH_HV = (pal_HH_rf.divide(pal_HV_rf)).rename('HH_HV');
//print(pal_HH_HV, 'pal_HH_HV');
//Map.addLayer(pal_HH_HV.clip(roi),{min:-1.0, max:1.0}, "pal_HH_HV");

var glcmHH = pal_HH_gn.unitScale(0,1).multiply(255).toByte().glcmTexture({size:3});
//print(glcmHH, 'glcmHH');

var glcmHV = pal_HV_gn.unitScale(0,1).multiply(255).toByte().glcmTexture({size:3});
var glcmHH_HV =pal_HH_HV.unitScale(0,1).multiply(255).toByte().glcmTexture({size:3});

var pal_variables = pal_HH_gn.addBands(pal_HV_gn).addBands(pal_HH_HV)
                             .addBands(glcmHH).addBands(glcmHV).addBands(glcmHH_HV);

//----------------------------------------------------Sentinel-1----------------------------------------------------
//Load Sentinel-1
var s1_col = ee.ImageCollection('COPERNICUS/S1_GRD_FLOAT')
                            .filterBounds(roi)
                            .filter(ee.Filter.eq('instrumentMode', 'IW'))
                            .filterDate('2018-05-01', '2020-04-30')
                            .filter(ee.Filter.listContains('transmitterReceiverPolarisation', 'VV'))
                            .filter(ee.Filter.listContains('transmitterReceiverPolarisation', 'VH'))
                            .filter(ee.Filter.eq('orbitProperties_pass', 'DESCENDING'));
                            
//print(s1_col, 'S1_col');

var s1_col_VV = s1_col.select('VV');
var s1_col_VH = s1_col.select('VH');

//Map.addLayer(S1_col.select('VV'), {}, 'S1_col');
//Map.addLayer(S1_col.select('VH'), {}, 'S1_col');

// Functions to convert from/to dB
function toNatural(img) {
  return ee.Image(10.0).pow(img.select(0).divide(10.0));
}

// convert sigma naught to gamma naught for S1

//function toGamma0(image) {
//  return image.select(1).subtract(image.select('angle').multiply(Math.PI/180.0).cos().log10().multiply(10.0));
//}

//Function applies Refined Lee to all images in collection

var s1_VV_rf = s1_col_VV.map(function(image){
  return toDB(RefinedLee(toNatural(image))).set("system:time_start", image.get('system:time_start'));
});

//print(s1_VV_rf, "s1_VV_rf");

//1 month VV composite from speckle filtered images

var months = ee.List.sequence(1, 12, 1);
//print(months);
var mon = ee.List(['January','February','March','April','May','June','July','August','September','October','November','December']);
var s1_VV_mon_composites = months.map(function(m) {
  var n = ee.Number(m).subtract(1);
  var s1_VV_image = s1_col_VV.filter(ee.Filter.calendarRange({
    start: m, 
    end: ee.Number(m).add(0), 
    field: 'month'
  })).median()
  .set('month', mon.get(n))
  .select(0).rename('VV_rf');
  
  var glcmVV = (s1_VV_image.select(0)).unitScale(0,1).multiply(255).toByte().glcmTexture({size:3});
  
  return s1_VV_image.addBands(glcmVV).float();
});

//print(s1_VV_mon_composites, "s1_VV_mon_composites");
//print(s1_VV_mon_composites.get(0),"s1_VV_mon_composites.get(0)");

var s1_VV_variables = ee.Image(s1_VV_mon_composites.get(0))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(1)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(2)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(3)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(4)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(5)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(6)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(7)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(8)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(9)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(10)))
                                           .addBands(ee.Image(s1_VV_mon_composites.get(11)));


var s1_VH_rf = s1_col_VH.map(function(image){
  return toDB(RefinedLee(toNatural(image))).set("system:time_start", image.get('system:time_start'));
});

//print(s1_VH_rf, "s1_VH_rf");


//1 month VH composite from speckle filtered images

var months = ee.List.sequence(1, 12, 1);
//print(months);
var mon = ee.List(['January','February','March','April','May','June','July','August','September','October','November','December']);
var s1_VH_mon_composites = months.map(function(m) {
  var n = ee.Number(m).subtract(1);
  var s1_VH_image = s1_col_VH.filter(ee.Filter.calendarRange({
    start: m, 
    end: ee.Number(m).add(0), 
    field: 'month'
  })).median()
  .set('month', mon.get(n))
  .select(0).rename('VH_rf');
  
  var glcmVH = (s1_VH_image.select(0)).unitScale(0,1).multiply(255).toByte().glcmTexture({size:3});
  
  return s1_VH_image.addBands(glcmVH).float();
});

//print(s1_VH_mon_composites, "s1_VH_mon_composites");
//print(s1_VH_mon_composites.get(0),"s1_VH_mon_composites.get(0)");

var s1_VH_variables = ee.Image(s1_VH_mon_composites.get(0))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(1)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(2)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(3)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(4)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(5)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(6)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(7)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(8)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(9)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(10)))
                                           .addBands(ee.Image(s1_VH_mon_composites.get(11)));
                                           

//--------------------------------------------------- Sentinel-2------------------------------------------------------

//Load Sentinel-2 SR
// Function to mask clouds using the Sentinel-2 QA band
// @param {ee.Image} image Sentinel-2 image
// @return {ee.Image} cloud masked Sentinel-2 image
 //
function maskS2clouds(image) {
  var qa = image.select('QA60');

  // Bits 10 and 11 are clouds and cirrus, respectively.
  var cloudBitMask = 1 << 10;
  var cirrusBitMask = 1 << 11;

  // Both flags should be set to zero, indicating clear conditions.
  var mask = qa.bitwiseAnd(cloudBitMask).eq(0)
      .and(qa.bitwiseAnd(cirrusBitMask).eq(0));
  var prop = image.toDictionary();

  return image.updateMask(mask).divide(10000).set("system:time_start", image.get('system:time_start'));
}

var s2collection = ee.ImageCollection('COPERNICUS/S2_SR')
                  .filterBounds(roi)
                  .filterDate('2015-04-01', '2020-04-30')
                  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE',50))
                  .map(maskS2clouds)
                  .select('B[2-8]', 'B8A', 'B11', 'B12');
//print(s2collection.first());
//print(s2collection.size());

var s2_med = s2collection.median();
//Map.addLayer(s2_med, {min: 0.0, max: 0.3,bands: ['B11', 'B8', 'B3']}, 's2_med');
var s2_med_ndvi =s2_med.normalizedDifference(['B8A', 'B4']);
var s2_water_mask =s2_med_ndvi.lte(0);

//Map.addLayer(s2_water_mask.clip(roi), {}, "s2_water_mask");

//1 month composite

var months = ee.List.sequence(1, 12, 1);
//print(months);
var mon = ee.List(['January','February','March','April','May','June','July','August','September','October','November','December']);
var s2_mon_composites = months.map(function(m) {
  var n = ee.Number(m).subtract(1);
  var s2_img_all_10m = s2collection.filter(ee.Filter.calendarRange({
    start: m, 
    end: ee.Number(m).add(0), 
    field: 'month'
  })).median()
  .set('month', mon.get(n));

  return s2_img_all_10m.float();
});

// Map the function over the collection and display the result.
//print(s2_mon_composites,'s2_mon_composites');

var check0 = ee.Image(s2_mon_composites.get(0));
var check1 = ee.Image(s2_mon_composites.get(1));
var check2 = ee.Image(s2_mon_composites.get(2));
var check3 = ee.Image(s2_mon_composites.get(3));
var check4 = ee.Image(s2_mon_composites.get(4));
var check5 = ee.Image(s2_mon_composites.get(5));
var check6 = ee.Image(s2_mon_composites.get(6));
var check7 = ee.Image(s2_mon_composites.get(7));
var check8 = ee.Image(s2_mon_composites.get(8));
var check9 = ee.Image(s2_mon_composites.get(9));
var check10 = ee.Image(s2_mon_composites.get(10));
var check11 = ee.Image(s2_mon_composites.get(11));

//Map.addLayer(check0, {min: 0.0, max: 0.3,bands: ['B11', 'B8', 'B3']}, 'checkjan');
//Map.addLayer(check1, {min: 0.0, max: 0.3,bands: ['B11', 'B8', 'B3']}, 'checkfeb');
//Map.addLayer(check2, {min: 0.0, max: 0.3,bands: ['B11', 'B8', 'B3']}, 'checkmar');
Map.addLayer(check3, {min: 0.0, max: 0.3,bands: ['B11', 'B8', 'B3']}, 'checkapr');
Map.addLayer(check10, {min: 0.0, max: 0.3,bands: ['B11', 'B8', 'B3']}, 'checknov');
//Map.addLayer(check11, {min: 0.0, max: 0.3,bands: ['B11', 'B8', 'B3']}, 'checkdec');

var comp_list = ee.List([check0,check1,check2,check3,check10,check11]);

var image_indices = ee.List([]);
var i;
for (i = 0; i < 6; i++) {
  var image = ee.Image(comp_list.get(i));
  
  var b2 = image.select('B2');
  var b3 = image.select('B3');
  var b4 = image.select('B4');
  var b5 = image.select('B5');
  var b6 = image.select('B6');
  var b7 = image.select('B7');
  var b8 = image.select('B8');
  var b8a = image.select('B8A');
  var b11 = image.select('B11');
  var b12 = image.select('B12');
  var si_1 = (b2.divide(b3).rename('SI_1'));
  var si_2 = (b2.divide(b4).rename('SI_2'));
  var si_3 = (b2.divide(b5).rename('SI_3'));
  var si_4 = (b2.divide(b6).rename('SI_4'));
  var si_5 = (b2.divide(b7).rename('SI_5'));
  var si_6 = (b2.divide(b8).rename('SI_6'));
  var si_7 = (b2.divide(b8a).rename('SI_7'));
  var si_8 = (b2.divide(b11).rename('SI_8'));
  var si_9 = (b2.divide(b12).rename('SI_9'));
  
  var si_10 = (b3.divide(b4).rename('SI_10'));
  var si_11 = (b3.divide(b5).rename('SI_11'));
  var si_12 = (b3.divide(b6).rename('SI_12'));
  var si_13 = (b3.divide(b7).rename('SI_13'));
  var si_14 = (b3.divide(b8).rename('SI_14'));
  var si_15 = (b3.divide(b8a).rename('SI_15'));
  var si_16 = (b3.divide(b11).rename('SI_16'));
  var si_17 = (b3.divide(b12).rename('SI_17'));
  
  var si_18 = (b4.divide(b5).rename('SI_18'));
  var si_19 = (b4.divide(b6).rename('SI_19'));
  var si_20 = (b4.divide(b7).rename('SI_20'));
  var si_21 = (b4.divide(b8).rename('SI_21'));
  var si_22 = (b4.divide(b8a).rename('SI_22'));
  var si_23 = (b4.divide(b11).rename('SI_23'));
  var si_24 = (b4.divide(b12).rename('SI_24'));
  
  var si_25 = (b5.divide(b6).rename('SI_25'));
  var si_26 = (b5.divide(b7).rename('SI_26'));
  var si_27 = (b5.divide(b8).rename('SI_27'));
  var si_28 = (b5.divide(b8a).rename('SI_28'));
  var si_29 = (b5.divide(b11).rename('SI_29'));
  var si_30 = (b5.divide(b12).rename('SI_30'));
  
  var si_31 = (b6.divide(b7).rename('SI_31'));
  var si_32 = (b6.divide(b8).rename('SI_32'));
  var si_33 = (b6.divide(b8a).rename('SI_33'));
  var si_34 = (b6.divide(b11).rename('SI_34'));
  var si_35 = (b6.divide(b12).rename('SI_35'));
    
  var si_36 = (b7.divide(b8).rename('SI_36'));
  var si_37 = (b7.divide(b8a).rename('SI_37'));
  var si_38 = (b7.divide(b11).rename('SI_38'));
  var si_39 = (b7.divide(b12).rename('SI_39'));
    
  var si_40 = (b8.divide(b8a).rename('SI_40'));
  var si_41 = (b8.divide(b11).rename('SI_41'));
  var si_42 = (b8.divide(b12).rename('SI_42'));
    
  var si_43 = (b8a.divide(b11).rename('SI_43'));
  var si_44 = (b8a.divide(b12).rename('SI_44'));
    
  var si_45 = (b11.divide(b12).rename('SI_45'));
    

  var nd_1 = image.normalizedDifference(['B3', 'B2']).rename('ND_1');
  var nd_2 = image.normalizedDifference(['B4', 'B2']).rename('ND_2');
  var nd_3 = image.normalizedDifference(['B8A', 'B2']).rename('ND_3');
  var nd_4 = image.normalizedDifference(['B4', 'B3']).rename('ND_4');
  var nd_5 = image.normalizedDifference(['B8A', 'B3']).rename('ND_5');
    
  var nd_6 = image.normalizedDifference(['B5', 'B2']).rename('ND_6');
  var nd_7 = image.normalizedDifference(['B6', 'B2']).rename('ND_7');
  var nd_8 = image.normalizedDifference(['B7', 'B2']).rename('ND_8');
  var nd_9 = image.normalizedDifference(['B8', 'B2']).rename('ND_9');
  var nd_10 = image.normalizedDifference(['B11', 'B2']).rename('ND_10');
  var nd_11 = image.normalizedDifference(['B12', 'B2']).rename('ND_11');
  
  var nd_12 = image.normalizedDifference(['B5', 'B3']).rename('ND_12');
  var nd_13 = image.normalizedDifference(['B6', 'B3']).rename('ND_13');
  var nd_14 = image.normalizedDifference(['B7', 'B3']).rename('ND_14');
  var nd_15 = image.normalizedDifference(['B8', 'B3']).rename('ND_15');
  var nd_16 = image.normalizedDifference(['B11', 'B3']).rename('ND_16');
  var nd_17 = image.normalizedDifference(['B12', 'B3']).rename('ND_17');
    
  var nd_18 = image.normalizedDifference(['B5', 'B4']).rename('ND_18');
  var nd_19 = image.normalizedDifference(['B6', 'B4']).rename('ND_19');
  var nd_20 = image.normalizedDifference(['B7', 'B4']).rename('ND_20');
  var nd_21 = image.normalizedDifference(['B8', 'B4']).rename('ND_21');
  var nd_22 = image.normalizedDifference(['B11', 'B4']).rename('ND_22');
  var nd_23 = image.normalizedDifference(['B12', 'B4']).rename('ND_23');
  var nd_24 = image.normalizedDifference(['B6', 'B5']).rename('ND_24');
  var nd_25 = image.normalizedDifference(['B7', 'B5']).rename('ND_25');
  var nd_26 = image.normalizedDifference(['B8A', 'B5']).rename('ND_26');
  var nd_27 = image.normalizedDifference(['B8', 'B5']).rename('ND_27');
  var nd_28 = image.normalizedDifference(['B11', 'B5']).rename('ND_28');
  var nd_29 = image.normalizedDifference(['B12', 'B5']).rename('ND_29');
  
  var nd_30 = image.normalizedDifference(['B7', 'B6']).rename('ND_30');
  var nd_31 = image.normalizedDifference(['B8A', 'B6']).rename('ND_31');
  var nd_32 = image.normalizedDifference(['B8', 'B6']).rename('ND_32');
  var nd_33 = image.normalizedDifference(['B11', 'B6']).rename('ND_33');
  var nd_34 = image.normalizedDifference(['B12', 'B6']).rename('ND_34');
  
  var nd_35 = image.normalizedDifference(['B8A', 'B7']).rename('ND_35');
  var nd_36 = image.normalizedDifference(['B8', 'B7']).rename('ND_36');
  var nd_37 = image.normalizedDifference(['B11', 'B7']).rename('ND_37');
  var nd_38 = image.normalizedDifference(['B12', 'B7']).rename('ND_38');
    
  var nd_39 = image.normalizedDifference(['B8', 'B8A']).rename('ND_39');
  var nd_40 = image.normalizedDifference(['B11', 'B8A']).rename('ND_40');
  var nd_41 = image.normalizedDifference(['B12', 'B8A']).rename('ND_41');
    
  var nd_42 = image.normalizedDifference(['B11', 'B8']).rename('ND_42');
  var nd_43 = image.normalizedDifference(['B12', 'B8']).rename('ND_43');
    
  var nd_44 = image.normalizedDifference(['B12', 'B11']).rename('ND_44');
      

  
  var ndvi = image.normalizedDifference(['B8A', 'B4']).rename('NDVI');
    
  var evi = image.expression('2.5 * ((nir - red) / (nir + 6 * red - 7.5 * blue + 1))',{
       'nir': image.select('B8A'), 'red': image.select('B4'), 'blue': image.select('B2')});
    
    
  var savi = image.expression('1.5 * ((nir - red) / (nir + red + 0.5))',{
    'nir': image.select('B8A'), 'red': image.select('B4')});
        
  var wri = (b3.add(b4).divide(b8a.add(b11)).rename('WRI'));
    
  var awei = image.expression('4 * (green - swir1) - (0.25 * nir + 2.75 * swir1)',{
    'green': image.select('B3'), 'swir1': image.select('B11'), 'nir': image.select('B8A')});
  
  var ccci = image.expression('((nir - vre1) / (nir + vre2)) / ((nir - red) / (nir + red))', {
      'nir': image.select('B8A'), 'red': image.select('B4'),'vre1': image.select('B5'), 
      'vre2': image.select('B6')});
      
  var s2rep = image.expression('705.0 + 35.0 * ((((red + vre3) / 2.0) - vre1) / (vre2 - vre1))',{
    'red': image.select('B4'),'vre1': image.select('B5'), 'vre2': image.select('B6'),
    'vre3': image.select('B7')});
    
  var ireci = image.expression('(nir - red)/(vre1/vre2)', { 
    'nir': image.select('B8A'), 'red': image.select('B4'),'vre1': image.select('B5'), 
    'vre2': image.select('B6')});

  
  var glcm_b = b2.multiply(255).int().glcmTexture({size:3});
  var glcm_g = b3.multiply(255).int().glcmTexture({size:3});
  var glcm_r = b4.multiply(255).int().glcmTexture({size:3});
  var glcm_nir = b8.multiply(255).int().glcmTexture({size:3});
  var glcm_swir1 = b11.multiply(255).int().glcmTexture({size:3});
  var glcm_swir2 = b12.multiply(255).int().glcmTexture({size:3});
  var glcm_vre1 = b5.multiply(255).int().glcmTexture({size:3});
  var glcm_vre2 = b6.multiply(255).int().glcmTexture({size:3});
  var glcm_vre3 = b7.multiply(255).int().glcmTexture({size:3});
  var glcm_nnir = b8a.multiply(255).int().glcmTexture({size:3});
  
 
  var image = image
               .addBands(si_1)
               .addBands(si_2)
               .addBands(si_3)
               .addBands(si_4)
               .addBands(si_5)
               .addBands(si_6)
              
               .addBands(si_7)
               .addBands(si_8)
               .addBands(si_9)
               .addBands(si_10)
              
               .addBands(si_11)
               .addBands(si_12)
             
               
               .addBands(si_13)
               .addBands(si_14)
               .addBands(si_15)
               .addBands(si_16)
              
               .addBands(si_17)
               .addBands(si_18)
               
               
               .addBands(si_19)
               .addBands(si_20)
               .addBands(si_21)
               .addBands(si_22)
             
               .addBands(si_23)
               .addBands(si_24)
               
               
               .addBands(si_25)
               .addBands(si_26)
               .addBands(si_27)
               .addBands(si_28)
               
               .addBands(si_31)
               .addBands(si_32)
               .addBands(si_33)
               .addBands(si_34)
               .addBands(si_35)
               .addBands(si_36)
               .addBands(si_37)
               .addBands(si_38)
               .addBands(si_39)
               .addBands(si_40)
               
               .addBands(si_41)
               .addBands(si_42)
               
               .addBands(si_43)
               .addBands(si_44)
               
               .addBands(si_45)
               .addBands(nd_1)
               .addBands(nd_2)
               .addBands(nd_3)
               .addBands(nd_4)
               .addBands(nd_5)
              
               .addBands(nd_6)
               .addBands(nd_7)
               .addBands(nd_8)
               .addBands(nd_9)
             
               .addBands(nd_10)
               .addBands(nd_11)
               
               .addBands(nd_12)
               .addBands(nd_13)
               .addBands(nd_14)
               .addBands(nd_15)
              
               .addBands(nd_16)
               .addBands(nd_17)
               
               
               .addBands(nd_18)
               .addBands(nd_19)
               .addBands(nd_20)
               .addBands(nd_21)
              
               .addBands(nd_22)
               .addBands(nd_23)
               
               .addBands(nd_24)
               .addBands(nd_25)
               .addBands(nd_26)
               .addBands(nd_27)
               .addBands(nd_28)
               .addBands(nd_29)
               .addBands(nd_30)
               .addBands(nd_31)
               .addBands(nd_32)
               .addBands(nd_33)
               .addBands(nd_34)
               .addBands(nd_35)
               .addBands(nd_36)
               .addBands(nd_37)
               .addBands(nd_38)
               .addBands(nd_39)
               
               .addBands(nd_40)
               .addBands(nd_41)
               
               .addBands(nd_42)
               .addBands(nd_43)
               
               .addBands(nd_44)
               .addBands(ndvi)
               .addBands(evi.rename('EVI'))
               .addBands(savi.rename('SAVI'))
               .addBands(wri)
               .addBands(awei.rename('AWEI'))
               
               .addBands(ccci.rename('CCC1'))
               .addBands(s2rep.rename('S2REP'))
               .addBands(ireci.rename('IRECI'))
               
               .addBands(glcm_b)
               .addBands(glcm_g)
               .addBands(glcm_r)
               .addBands(glcm_nir)
               .addBands(glcm_swir1)
               .addBands(glcm_swir2)
               
               .addBands(glcm_vre1)
               .addBands(glcm_vre2)
               .addBands(glcm_vre3)
               .addBands(glcm_nnir);
  //print(image,i);
  
  var image_indices = image_indices.add(image);
}

//print(image_indices);

//Monthly NDVI

var Jan_composite = ee.Image(image_indices.get(0));
var Jan_ndvi = Jan_composite.select ("NDVI");
var Jan_ndvi_mask = Jan_ndvi.gte(0.5);

var Feb_composite = ee.Image(image_indices.get(1));
var Feb_ndvi = Feb_composite.select ("NDVI");
var Feb_ndvi_mask = Feb_ndvi.gte(0.5);

var Mar_composite = ee.Image(image_indices.get(2));
var Mar_ndvi = Mar_composite.select ("NDVI");
var Mar_ndvi_mask = Mar_ndvi.gte(0.5);

var Apr_composite = ee.Image(image_indices.get(3));
var Apr_ndvi = Apr_composite.select ("NDVI");
var Apr_ndvi_mask = Apr_ndvi.gte(0.5);

var Nov_composite = ee.Image(image_indices.get(4));
var Nov_ndvi = Nov_composite.select ("NDVI");
var Nov_ndvi_mask = Nov_ndvi.gte(0.5);

var Dec_composite = ee.Image(image_indices.get(5));
var Dec_ndvi = Dec_composite.select ("NDVI");
var Dec_ndvi_mask = Dec_ndvi.gte(0.5);

var six_month_ndvi = Jan_ndvi_mask.add(Feb_ndvi_mask).add(Mar_ndvi_mask)
                                  .add(Apr_ndvi_mask).add(Nov_ndvi_mask).add(Dec_ndvi_mask);

var nf_mask = six_month_ndvi.gte(6);                  
//print(nf_mask,{},"nf_mask");
//Map.addLayer(nf_mask.updateMask(nf_mask), {},"nf_mask");

var forest1 = tc_gte10.unmask(0);
//Map.addLayer(forest1.updateMask(forest1), {},"forest1");

var forest2 = nf_mask.eq(1).unmask(0);
//Map.addLayer(forest2.updateMask(forest2), {},"forest2");

var forest = forest1.add(forest2);
forest= forest.gte(1);
//Map.addLayer(forest.updateMask(forest), {},"forest");

//Monthly water NDVI

var Jan_composite = ee.Image(image_indices.get(0));
var Jan_ndvi = Jan_composite.select ("NDVI");
var Jan_ndvi_mask = Jan_ndvi.lte(0);

var Feb_composite = ee.Image(image_indices.get(1));
var Feb_ndvi = Feb_composite.select ("NDVI");
var Feb_ndvi_mask = Feb_ndvi.lte(0);

var Mar_composite = ee.Image(image_indices.get(2));
var Mar_ndvi = Mar_composite.select ("NDVI");
var Mar_ndvi_mask = Mar_ndvi.lte(0);

var Apr_composite = ee.Image(image_indices.get(3));
var Apr_ndvi = Apr_composite.select ("NDVI");
//Map.addLayer(Apr_ndvi,{}, "Apr_ndvi");
var Apr_ndvi_mask = Apr_ndvi.lte(0);

var Nov_composite = ee.Image(image_indices.get(4));
var Nov_ndvi = Nov_composite.select ("NDVI");
var Nov_ndvi_mask = Nov_ndvi.lte(0);

var Dec_composite = ee.Image(image_indices.get(5));
var Dec_ndvi = Dec_composite.select ("NDVI");
//Map.addLayer(Dec_ndvi,{}, "Dec_ndvi");

var Dec_ndvi_mask = Dec_ndvi.lte(0);
//Map.addLayer(Dec_ndvi_mask,{}, "Dec_ndvi_mask");

var six_month_water_ndvi = Jan_ndvi_mask.add(Feb_ndvi_mask).add(Mar_ndvi_mask)
                                  .add(Apr_ndvi_mask).add(Nov_ndvi_mask).add(Dec_ndvi_mask);

var water_mask = six_month_water_ndvi.lt(1);                  
//print(water_mask,{},"water_mask");
//Map.addLayer(water_mask.updateMask(water_mask), {}, "water_mask");

//NDVI Plot

var six_month_ndvi =Jan_ndvi.addBands(Feb_ndvi).addBands(Mar_ndvi).addBands(Apr_ndvi).addBands(Nov_ndvi).addBands(Dec_ndvi);
print(six_month_ndvi);
var plot_mdf = ee.FeatureCollection(up_evg).limit(1);

// Define a dictionary that associates band names with values and labels.
var precipInfo = {
  'NDVI': {v: 1, f: 'Jan'},
  'NDVI_1': {v: 2, f: 'Feb'},
  'NDVI_2': {v: 3, f: 'Mar'},
  'NDVI_3': {v: 4, f: 'Apr'},
  'NDVI_4': {v: 5, f: 'Nov'},
  'NDVI_5': {v: 6, f: 'Dec'}
};

// Organize precipitation information into objects for defining x values and
// their tick labels. Note that chart options provided to the .setOptions()
// function must be client-side objects, which is why a client-side for
// loop is used to iteratively populate lists from the above dictionary.
var xPropVals = [];    // List to codify x-axis band names as values.
var xPropLabels = [];  // Holds dictionaries that label codified x-axis values.
for (var key in precipInfo) {
  xPropVals.push(precipInfo[key].v);
  xPropLabels.push(precipInfo[key]);
}

// Define the chart and print it to the console.
var chart = ui.Chart.image
                .regions({
                  image: six_month_ndvi,
                  regions:plot_mdf,
                  reducer: ee.Reducer.mean(),
                  scale: 20,
                  seriesProperty: 'label',
                  xLabels: xPropVals
                })
                .setChartType('LineChart')
                .setOptions({
                  title: '',
                  
                  
                  hAxis: {
                    title: 'Month',
                    titleTextStyle: {fontName: 'arial', fontSize: 12, italic: false, bold: true},
                    textStyle : {color: 'black', fontName: 'arial', fontSize: 12},
                    ticks: xPropLabels
                  },
                  vAxis: {
                    title: 'NDVI',
                    titleTextStyle: {fontName: 'arial', fontSize: 12, italic: false, bold: true},
                    textStyle : {color: 'black', fontName: 'arial', fontSize: 12},
                    viewWindow: {min: 0, max: 1}
                  },
                  colors: ['black'],
                  lineSize: 2
                });
print(chart);

/*
//var dry_forest = Jan_ndvi.addBands(Feb_ndvi).addBands(Mar_ndvi)
//                                  .addBands(Apr_ndvi).addBands(Nov_ndvi).addBands(Dec_ndvi).addBands(glcm_nnir);

//Map.addLayer(dry_forest, {},"dry_forest");

var dry_forest_mask = Jan_ndvi.gte(0.3)
                     .and(Feb_ndvi.gte(0.19))
                     .and(Mar_ndvi.gte(0.19))
                     .and(Apr_ndvi.gte(0.19))
                     .and(Nov_ndvi.gte(0.5))
                     .and(Dec_ndvi.gte(0.5))
                     .and(glcm_nnir.select('B8A_prom').gte(5));

Map.addLayer(dry_forest_mask, {},"dry_forest_mask");

var forest3 = dry_forest_mask;


var forest = forest1.add(forest2).add(forest3);
forest= forest.gte(1);
Map.addLayer(forest.updateMask(forest), {},"forest");

var water = Jan_ndvi.lte(0)
            .and(Feb_ndvi.lte(0))
            .and(Mar_ndvi.lte(0))
            .and(Apr_ndvi.lte(0))
            .and(Nov_ndvi.lte(0))
            .and(Dec_ndvi.lte(0));
            
water = water.gte(1);            
Map.addLayer(water.updateMask(water), {},"water");


var evg = Jan_ndvi.gte(0.7).and(Feb_ndvi.gte(0.7))
                           .and(Mar_ndvi.gte(0.7))
                           .and(Apr_ndvi.gte(0.7))
                           .and(Nov_ndvi.gte(0.7))
                           .and(Dec_ndvi.gte(0.7));
                           
Map.addLayer(evg.updateMask(evg), {},'evg');
/**/

var area_mask1 = ee.Image.constant(1).clip(table2).mask().not(); //Rakhine
var area_mask2 = ee.Image.constant(1).clip(table3).mask().not();//Ayeyarwaddy
var area_mask3 = ee.Image.constant(1).clip(table4).mask().not(); //Kayin
var area_mask4 = ee.Image.constant(1).clip(table5).mask().not(); //Mon
var area_mask5 = ee.Image.constant(1).clip(table6).mask().not(); //Magway_Mandalay_NPT
var area_mask6 = ee.Image.constant(1).clip(table7).mask().not(); //Kayah





//---------------------------------------------------Build-Classification-Composite---------------------------------------

// convert list of images to single image
var class_composite = ee.Image(image_indices.get(0)).addBands(image_indices.get(1))
                                                    .addBands(image_indices.get(2))
                                                    .addBands(image_indices.get(3))
                                                    .addBands(image_indices.get(4))
                                                    .addBands(image_indices.get(5))
                                                    .addBands(gedi_roi)
                                                    .addBands(pal_variables)
                                                    .addBands(s1_VV_variables)
                                                    .addBands(s1_VH_variables)
                                                    .addBands(elevation)
                                                    .addBands(slope)
                                                    .updateMask(forest)
                                                    .updateMask(water_mask)
                                                    .updateMask(area_mask1)
                                                    .updateMask(area_mask2)
                                                    .updateMask(area_mask3)
                                                    .updateMask(area_mask4)
                                                    .updateMask(area_mask5)
                                                    .updateMask(area_mask6);
                                                    
                                                    
print(class_composite);

class_composite= class_composite.select('B8_savg_5','B7_savg_5','B8A_savg_5','SI_4_3','B8_2','SI_7_3','B6_savg_1','B7_savg_1',
'ND_34_5','B6_savg_5','B6_savg_2','SI_13','SI_45_2','B8_savg_4','SI_8_3','B8_savg','B8A_savg_4',
'ND_15','ND_8_3','ND_37_3','B8_savg_2','ND_9_3','SI_7_1','ND_9_2','ND_3_3','B12_savg_2','B7_savg_3',
'SI_1_2','B2_prom_1','ND_1_3','B8_savg_3');

var bands = class_composite.bandNames();
print(bands.size());
//Map.addLayer(class_composite, {}, 'class_composite');


//----------------------------------------------------Train--Classifier----------------------------------------------------

//Training

var training = class_composite.sampleRegions({
      // Get the sample from the polygons FeatureCollection.
      collection: training,
      // Keep this list of properties from the polygons.
      properties: ['Class'],
      // Set the scale to get Sentinel pixels in the polygons.
      scale: 20,
      tileScale:16
      });
//print(training.limit(10));
print(training.size());

print(training.filter(ee.Filter.eq('Class', 0)));
var mangrove_size = (training.filter(ee.Filter.eq('Class', 0))).size();
print(mangrove_size,'mangrove_size');

var mdf_size = (training.filter(ee.Filter.eq('Class', 1))).size();
print(mdf_size,'mdf_size');

var rubber_size = (training.filter(ee.Filter.eq('Class', 2))).size();
print(rubber_size,'rubber_size');

var bamboo_size = (training.filter(ee.Filter.eq('Class', 3))).size();
print(bamboo_size,'bamboo_size');

var up_evg_size = (training.filter(ee.Filter.eq('Class', 4))).size();
print(up_evg_size,'up_evg_size');

var ind = training.filter(ee.Filter.eq('Class', 5));
var ind_size = (training.filter(ee.Filter.eq('Class', 5))).size();
print(ind_size,'ind_size');

var ddf = training.filter(ee.Filter.eq('Class', 6));
var ddf_size = (training.filter(ee.Filter.eq('Class', 6))).size();
print(ddf_size,'ddf_size');

var op = training.filter(ee.Filter.eq('Class', 7));
var op_size = (training.filter(ee.Filter.eq('Class', 7))).size();
print(op_size,'op_size');


training = training.filter(ee.Filter.eq('Class', 0)).limit(50) 
           .merge(training.filter(ee.Filter.eq('Class', 1)).limit(100))
           .merge(training.filter(ee.Filter.eq('Class', 2)).limit(4405))
           .merge(training.filter(ee.Filter.eq('Class', 3)).limit(100))
           .merge(training.filter(ee.Filter.eq('Class', 4)).limit(1280))
           .merge(training.filter(ee.Filter.eq('Class', 5)).limit(10))
           .merge(training.filter(ee.Filter.eq('Class', 6)).limit(50))
           .merge(training.filter(ee.Filter.eq('Class', 7)).limit(29));
           

print(training, 'train for IV');


var classifier = ee.Classifier.smileRandomForest(500)
                .train({
                  features: training, 
                  classProperty:'Class', 
                  inputProperties:bands,
                });
                
var dict = classifier.explain();
//print('Explain:',dict);    


var variable_importance = ee.FeatureCollection(ee.Feature(null, ee.Dictionary(dict).get('importance')));

/*
var chart =ui.Chart.feature.byProperty(variable_importance)
.setChartType('ColumnChart')
.setOptions({
title: 'Random Forest Variable Importance',
legend: {position: 'none'},
hAxis: {title: 'Bands'},
vAxis: {title: 'Importance'}
});
 
print(chart);
/**/

//----------------------------------------------Export--Important--Variables-------------------------------------------


// Export the FeatureCollection to a KML file.
Export.table.toDrive({
  collection: variable_importance,
  description:'RF_IV_Bago_and_Yangon',
  fileFormat: 'CSV'
});

//----------------------------------------------Selected--Bands-------------------------------------


//----------------------------------------------Generate--Classified--Map-----------------------------------------

var classified = class_composite.classify(classifier).unmask(100);

// Define a palette from the IGBP classification.

//var Palette = ['152106', '225129', '369b47', '30eb5b', '387242', '6a2325', 'c3aa69'];

var Palette = ['#008000', '#00FF00', '#808000', '#FFFF00', '#FF00FF', '6a2325', 'c3aa69']; //green, lime, olive,yellow,fuchsia

Map.addLayer(classified, {palette: Palette, min: 0, max: 7}, 'classification');


//---------------------------------------------Export---Maps--------------------------------------------------------

// Export the image, specifying scale and region.
Export.image.toDrive({
  image: classified,
  description: 'FT_Bago_and_Yangon_Run3_mangrove_on_mountain_edited',
  scale: 20,
  region: roi,
  maxPixels:653997022
});


/*
// Export the image, specifying scale and region.
Export.image.toDrive({
  image: nf_mask,
  description: 'nf_mask',
  scale: 20,
  region: roi,
  fileFormat: 'GeoTIFF',
  maxPixels:375582411
});

/**/

